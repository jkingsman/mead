<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Kiwi Meadery -- Batch Lookup</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
    <style type="text/css">
        #serial {
            font-size: 35px;
            width: 40%;
        }

        .italic {
            font-style: italic;
        }

        td {
            padding: 0px !important;
            vertical-align: top;
        }

        .dateCol {
            min-width: 130px;
        }
    </style>
    <meta name="viewport" content="width=device-width">
</head>

<body>
    <nav class="light-blue lighten-1" role="navigation">
        <div class="nav-wrapper container"><a id="logo-container" href="#" class="brand-logo">Kiwi Mead</a>
    </nav>
    <div class="section no-pad-bot" id="index-banner">
        <div class="container">
            <div class="row">
                <div class="col s12">
                    <ul class="tabs">
                        <li class="tab col s3"><a class="active" href="#pageContent">Mead Lookup</a></li>
                        <li class="tab col s3"><a href="#recipes">Recipes</a></li>
                    </ul>
                </div>
                <div id="pageContent" class="col s12">
                    <br><br>
                    <h1 class="header center orange-text">Your Mead's Story</h1>
                    <div class="row center">
                        <h5 class="header col s12 light">Enter your serial and find out more about your mead (or what will soon be your mead!). Bottle serials begin with B (e.g. "B5") and fermentation serials begin with F (e.g. "F2").</h5>
                    </div>
                    <div class="row center">
                        <div class="input-field col s12">
                            <input placeholder="B0005" id="serial" type="text">
                        </div>
                    </div>
                    <div class="row center">
                        <a onclick="lookup();" id="download-button" class="btn-large waves-effect waves-light orange">Find my mead!</a>
                    </div>
                </div>
                <div id="recipes" class="col s12">
                    <h3>Recipe Browser</h3>
                    <ul class="collapsible" data-collapsible="accordion" id="recipeEntryContainer">

                    </ul>
                </div>
            </div>
        </div>
    </div>

    <img id="kiwiBuffer" style="display: none;" src="kiwi.png"/> <!-- image buffer for QR code image reading -->

    <footer class="page-footer orange">
        <div class="container">
        </div>
        <div class="footer-copyright">
            <div class="container">
                <a class="orange-text text-lighten-3" href="http://jacksbrain.com">MIT Licensed 2017</a>
            </div>
        </div>
    </footer>

    <script id="meadTemplate" type="text/x-handlebars-template">
        <h3>{{ type }}</h3>
        <div class="row">
            <div class="col m6">
                <h5>Batch &amp; Bottle</h5>
                <strong>Batch: </strong>F{{ batchID }}<br />
                <strong>Bottle Range: </strong>B{{ bottleRangeMin }} - B{{ bottleRangeMax }}<br />
                <strong>Brew Date: </strong>{{ timeline.[0].[0] }}<br />
                <strong>Batch Size: </strong>{{ size }}<br />
                <strong>Suggested Opening Date: </strong>{{ openingDate }}
                <br /><br />
                <h5>Recipe Notes</h5> {{{ notes }}}
                <ul class="collapsible" data-collapsible="accordion">
                    <li>
                        <div class="collapsible-header">Click to view full recipe ({{ recipeName }})</div>
                        <div class="collapsible-body">{{{ markdown recipe }}}</div>
                    </li>
                </ul>
                <h5>Tasting Notes</h5> {{{ tastingNotes }}}
                <h5>Media</h5>
                <div class="slider" style="max-width: 500px;">
                    <ul class="slides">
                        {{#each images}}
                        <li>
                            <img src="{{ this }}">
                        </li>
                        {{/each }}
                </div>
            </div>
            <div class="col m6">
                <h5>Timeline</h5>
                <table>
                    {{#each timeline }}
                    <tr>
                        <td class="dateCol">
                            <strong>{{ this.[0] }}</strong>
                        </td>
                        <td>
                            {{ this.[1] }}
                        </td>
                    </tr>
                    {{/each }}
                </table>
                <h5>Gravity Readings</h5>
                <table>
                    {{#each gravReadings }}
                    <tr>
                        <td class="dateCol">
                            <strong>{{ this.[0] }}</strong>
                        </td>
                        <td>
                            {{ this.[2] }}
                        </td>
                        <td>
                            {{ this.[1] }}SG ({{ this.[3] }}% ABV)
                        </td>
                    </tr>
                    {{/each }}
                </table>
                <h5>Bottle Distribution</h5>
                <ul>
                    {{#each bottleDistribution}}
                    <li>
                        B{{ this.[0] }} to {{ this.[1] }}
                    </li>
                    {{/each }}
                </ul>
                <h5>QR Code</h5>
                <div id="qrCode"></div>
            </div>
        </div>
    </script>

    <script type="text/javascript" src="//code.jquery.com/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
    <script type="text/javascript" src="//cdn.rawgit.com/showdownjs/showdown/1.7.6/dist/showdown.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.10/handlebars.min.js"></script>
    <script type="text/javascript" src="qrcode.min.js"></script> <!-- https://github.com/davidshimjs/qrcodejs -->
    <script type="text/javascript" src="meads.js"></script>
    <script type="text/javascript" src="main.js"></script>
    <script type="text/javascript" src="naming.js"></script>
</body>

</html>
