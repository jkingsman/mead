<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Mead Kiwi -- Batch Lookup</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="favicon.ico">
    <style type="text/css">
        #serial {
            font-size: 35px;
            width: 40%;
        }

        .italic {
            font-style: italic;
        }

        td {
            padding: 0px !important;
            vertical-align: top;
        }

        .dateCol {
            min-width: 130px;
        }

        #pageContent h1 {
            margin: .5rem 0 .5rem 0;
        }

        #qrCode {
            background-color: #f6c729;
            width: fit-content;
        }

        #qrCode h3 {
            margin: 0;
            text-align: center;
            padding-bottom: 10px;
            font-weight: bold;
        }

        #logo {
            width: 50px;
            margin-top: 10px;
            margin-right: 10px;
        }
    </style>
</head>

<body>
    <nav class="orange lighten-1" role="navigation">
        <div class="nav-wrapper container">
            <a id="logo-container" href="/" class="brand-logo"><img id="logo" src="assets/kiwi_orig.png" /><span class="hide-on-small-only">Mead Kiwi</span></a>
    </nav>
    <div class="section no-pad-bot" id="index-banner">
        <div class="container">
            <div class="row">
                <div class="col s12">
                    <ul class="tabs">
                        <li class="tab col s3"><a class="active" href="#pageContent">Mead Lookup</a></li>
                        <li class="tab col s3"><a href="#recipes">Recipes</a></li>
                    </ul>
                </div>
                <div id="pageContent" class="col s12">
                    <h1 class="header center orange-text">Your Mead's Story</h1>
                    <div class="row center">
                        <h5 class="header col s12 light">Enter your serial and find out more about your mead!</h5>
                    </div>
                    <div class="row center">
                        <div class="input-field col s12">
                            <input placeholder="B0005" id="serial" type="text">
                        </div>
                    </div>
                    <div class="row center">
                        <a onclick="lookup();" id="download-button" class="btn-large waves-effect waves-light blue">Find my mead!</a>
                    </div>
                    <div id="currentStatusContainer">

                    </div>
                </div>
                <div id="recipes" class="col s12">
                    <h3>Recipe Browser</h3>
                    <ul class="collapsible" data-collapsible="accordion" id="recipeEntryContainer">

                    </ul>
                </div>
            </div>
        </div>
    </div>

    <img id="kiwiBuffer" style="display: none;" src="kiwi.png" />
    <!-- image buffer for QR code image reading -->

    <footer class="page-footer orange">
        <div class="container">
        </div>
        <div class="footer-copyright">
            <div class="container">
                <a class="orange-text text-lighten-3" href="http://jacksbrain.com">MIT Licensed 2017</a>
            </div>
        </div>
    </footer>

    <script id="currentStatusTemplate" type="text/x-handlebars-template">
        <h4>Current Meads</h4> {{#each this }}
        <ul>
            {{#if this.status}}
            <li>
                <a href="/#F{{padserial this.batchID }}">F{{padserial this.batchID }}</a>: {{ this.status }}
            </li>
            {{/if }}
        </ul>
        {{/each }}
    </script>

    <script id="meadTemplate" type="text/x-handlebars-template">
        <h3>{{ type }}</h3>
        <h4>Serial: {{ descriptor }}</h4>
        <div class="row">
            <div class="col m6">
                <h5>Batch &amp; Bottle</h5>
                <strong>Batch: </strong>F{{padserial batchID }}<br />
                <strong>Bottle Range: </strong>B{{padserial bottleRangeMin }} - B{{padserial bottleRangeMax }}<br />
                <strong>Brew Date: </strong>{{ timeline.[0].[0] }}<br />
                <strong>Batch Size: </strong>{{ size }}<br />
                <strong>Suggested Opening Date: </strong>{{ openingDate }}

                <h5>Recipe Notes</h5> {{{ notes }}}
                <ul class="collapsible" data-collapsible="accordion">
                    <li>
                        <div class="collapsible-header">Click to view full recipe ({{ recipeName }})</div>
                        <div class="collapsible-body">{{{ markdown recipe }}}</div>
                    </li>
                </ul>

                <h5>Timeline</h5> {{#each timeline }}
                <p>
                    <strong>{{ this.[0] }}</strong>&nbsp;{{ this.[1] }}<br />
                </p>
                {{/each }} {{#if tastingNotes}}
                <h5>Tasting Notes</h5> {{ tastingNotes }}{{/if }}

                <h5>Gravity Readings</h5> {{#each gravReadings }}
                <p>
                    <strong>{{ this.[0] }}</strong>&nbsp;{{ this.[2] }} -- {{ this.[1] }}SG ({{ this.[3] }}% ABV)<br />
                </p>
                {{/each }}

                <h5>Bottle Distribution</h5>
                <ul>
                    {{#each bottleDistribution}}
                    <li>
                        B{{ this.[0] }} to {{ this.[1] }}
                    </li>
                    {{/each }}
                </ul>
            </div>
            <div class="col m6">
                <h5>Media</h5>
                <div class="slider" style="max-width: 500px;">
                    <ul class="slides">
                        {{#each images}}
                        <li>
                            <img src="{{ this }}">
                        </li>
                        {{/each }}
                </div>

                <h5>QR Code</h5>
                <div id="qrCode"></div>
            </div>
        </div>
    </script>

    <script type="text/javascript" src="//code.jquery.com/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
    <script type="text/javascript" src="//cdn.rawgit.com/showdownjs/showdown/1.7.6/dist/showdown.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.10/handlebars.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
    <script type="text/javascript" src="qrcode.min.js"></script>
    <script type="text/javascript" src="meads.js"></script>
    <script type="text/javascript" src="main.js"></script>
    <script type="text/javascript" src="naming.js"></script>
</body>

</html>
