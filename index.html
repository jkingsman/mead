<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Mead Kiwi | Batch Lookup</title>
    <link href="lib/icon.css" rel="stylesheet">
    <link rel="stylesheet" href="lib/materialize.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="favicon.ico">
    <style type="text/css">
        #serial {
            font-size: 35px;
            width: 40%;
        }

        .italic {
            font-style: italic;
        }

        td {
            padding: 0px !important;
            vertical-align: top;
        }

        .dateCol {
            min-width: 130px;
        }

        #pageContent h1 {
            margin: .5rem 0 .5rem 0;
        }

        #qrCode {
            background-color: #f6c729;
            width: fit-content;
        }

        #qrCode h3 {
            margin: 0;
            text-align: center;
            padding-bottom: 10px;
            font-weight: bold;
        }

        #logo {
            width: 50px;
            margin-top: 10px;
            margin-right: 10px;
        }

        .marginLeft15 {
            margin-left: 15px;
        }

        strong {
            font-weight: bold;
        }
    </style>
</head>

<body>
    <nav class="orange lighten-1" role="navigation">
        <div class="nav-wrapper container">
            <a id="logo-container" href="/" class="brand-logo"><img id="logo" src="assets/kiwi_orig.png" /><span class="hide-on-small-only">Mead Kiwi</span></a>
    </nav>
    <div class="section no-pad-bot" id="index-banner">
        <div class="container">
            <div class="row">
                <div class="col s12">
                    <ul class="tabs">
                        <li class="tab col s3"><a class="active" href="#pageContent">Mead Lookup</a></li>
                        <li class="tab col s3"><a href="#recipes">Recipes</a></li>
                    </ul>
                </div>
                <div id="pageContent" class="col s12">
                    <h1 class="header center orange-text">Your Mead's Story</h1>
                    <div class="row center">
                        <h5 class="header col s12 light">Enter your serial and find out more about your mead!</h5>
                    </div>
                    <div class="row center">
                        <div class="input-field col s12">
                            <input placeholder="B0005" id="serial" type="text">
                        </div>
                    </div>
                    <div class="row center">
                        <a onclick="lookup();" id="download-button" class="btn-large waves-effect waves-light blue">Find my mead!</a>
                    </div>
                    <div id="currentStatusContainer">

                    </div>
                </div>
                <div id="recipes" class="col s12">
                    <h3>Recipe Browser</h3>
                    <ul class="collapsible" data-collapsible="accordion" id="recipeEntryContainer">

                    </ul>
                </div>
            </div>
        </div>
    </div>

    <img id="kiwiBuffer" style="display: none;" src="kiwi.png" />
    <!-- image buffer for QR code image reading -->

    <footer class="page-footer orange">
        <div class="container">
        </div>
        <div class="footer-copyright">
            <div class="container">
                <a class="orange-text text-lighten-3" href="http://jacksbrain.com">MIT Licensed 2017</a>
            </div>
        </div>
    </footer>

    <script id="currentStatusTemplate" type="text/x-handlebars-template">
        <h4>Current Meads</h4> {{#each this }}
        <ul>
            {{#if this.status}}
            <li>
                <a href="/#F{{padSerial this.batchID }}">F{{padSerial this.batchID }}</a>: {{ this.status.[0] }}. Next step is {{ this.status.[1] }} (pending {{ this.status.[2] }}/{{daysFromNow this.status.[2] }} days).
            </li>
            {{/if }}
        </ul>
        {{/each }}
        <h4>All Meads</h4> {{#each this }}
        <ul>
            <li>
                <a href="/#F{{padSerial this.batchID }}">F{{padSerial this.batchID }}</a>: ({{ this.recipeName }}; pitched {{ this.timeline.[0].[0] }})
            </li>
        </ul>
        {{/each }}
    </script>

    <script id="recipeTemplate" type="text/x-handlebars-template">
        <li>
            <div class="collapsible-header"><strong>{{ type }}</strong>&nbsp;({{ usedInString }})</div>
            <div class="collapsible-body">
                <h4>{{ type }}</h4>
                <strong>Volume: </strong>{{ volume }}<br />
                <strong>Brewtime</strong>
                <ul>
                    {{#each brewTime }}
                    <li class="marginLeft15">
                        {{ this }}
                    </li>
                    {{/each }}
                </ul>
                <strong>Ingredients</strong>
                <ul>
                    {{#each ingredients }}
                    <li class="marginLeft15">
                        {{ this }}
                    </li>
                    {{/each }}
                </ul>
                <strong>Equipment/Misc</strong>
                <ul>
                    {{#each equipmentMisc }}
                    <li class="marginLeft15">
                        {{ this }}
                    </li>
                    {{/each }}
                </ul>
                <strong>Recipe</strong>
                <ol>
                    {{#each recipe }}
                    <li>
                        {{ this }}
                    </li>
                    {{/each }}
                </ol>
            </div>
        </li>
    </script>

    <script id="meadTemplate" type="text/x-handlebars-template">
        <h3>{{ type }}</h3>
        <h4>Serial: {{ id }}</h4>
        <div class="row">
            <div class="col m6">
                <h5>Batch &amp; Bottle</h5>
                <strong>Batch: </strong>F{{padSerial batchID }}<br />
                <strong>Batch recipe:</strong> {{ recipe.type }}<br />
                <strong>Bottle Range: </strong>B{{padSerial bottleRangeMin }} - B{{padSerial bottleRangeMax }}<br />
                <strong>Pitch Date: </strong>{{ timeline.[0].[0] }}<br />
                <strong>Batch Size: </strong>{{ size }}<br />
                <strong>Suggested Opening Date: </strong>{{ openingDate }}

                <hr />
                <h5>Recipe Notes</h5> {{{ notes }}}
                <ul class="collapsible" data-collapsible="accordion">
                    <li>
                        <div class="collapsible-header">Click to view full recipe</div>
                        <div class="collapsible-body">
                            <h4>{{ recipe.type }}</h4>
                            <strong>Volume: </strong>{{ recipe.volume }}<br />
                            <strong>Brewtime</strong>
                            <ul>
                                {{#each recipe.brewTime }}
                                <li class="marginLeft15">
                                    {{ this }}
                                </li>
                                {{/each }}
                            </ul>
                            <strong>Ingredients</strong>
                            <ul>
                                {{#each recipe.ingredients }}
                                <li class="marginLeft15">
                                    {{ this }}
                                </li>
                                {{/each }}
                            </ul>
                            <strong>Equipment/Misc</strong>
                            <ul>
                                {{#each recipe.equipmentMisc }}
                                <li class="marginLeft15">
                                    {{ this }}
                                </li>
                                {{/each }}
                            </ul>
                            <strong>Recipe</strong>
                            <ol>
                                {{#each recipe.recipe }}
                                <li>
                                    {{ this }}
                                </li>
                                {{/each }}
                            </ol>
                        </div>
                    </li>
                </ul>

                <hr />
                {{#if timeline }}
                <h5>Timeline</h5>{{/if }} {{#each timeline }}
                <p>
                    <strong>{{ this.[0] }}</strong>&nbsp;{{ this.[1] }}<br />
                </p>
                {{/each }}

                <hr />
                {{#if tastingNotes }}
                <h5>Tasting Notes</h5>{{/if }} {{#each tastingNotes }}
                <p>
                    <strong>{{ this.[0] }}</strong>&nbsp;{{ this.[1] }}<br />
                </p>
                {{/each }}

                <hr />
                {{#if gravReadings }}
                <h5>Gravity Readings</h5>{{/if }} {{#each gravReadings }}
                <p>
                    <strong>{{ this.[0] }}</strong>&nbsp;{{ this.[2] }} -- {{ this.[1] }}SG ({{ this.[3] }}% ABV)<br />
                </p>
                {{/each }}

                <hr />
                <h5>Bottle Distribution</h5>
                <ul>
                    {{#each bottleDistribution}}
                    <li>
                        <a href="#B{{ this.[0] }}">B{{ this.[0] }}</a> to {{ this.[1] }}
                    </li>
                    {{/each }}
                </ul>
            </div>
            <div class="col m6">
                {{#if images}}
                <h5>Media</h5>
                <div class="slider" style="max-width: 500px;">
                    <ul class="slides">
                        {{#each images}}
                        <li>
                            <img src="{{ this }}">
                        </li>
                        {{/each }}
                </div>
                {{/if }}

                <h5>QR Code</h5>
                <div id="qrCode"></div>
            </div>
        </div>
    </script>

    <script type="text/javascript" src="lib/jquery.min.js"></script>
    <script type="text/javascript" src="lib/materialize.min.js"></script>
    <script type="text/javascript" src="lib/handlebars.min.js"></script>
    <script type="text/javascript" src="lib/html2canvas.min.js"></script>
    <script type="text/javascript" src="lib/qrcode.min.js"></script>
    <script type="text/javascript" src="meads.js"></script>
    <script type="text/javascript" src="main.js"></script>
    <script type="text/javascript" src="naming.js"></script>
</body>

</html>
